# 부하 테스트(Load Test) 분석 보고서

**작성일:** 2026년 1월 6일  
**테스트 도구:** k6 v1.4.2  
**대상 서버:** AWS EC2 (t3a.small) - Production Environment

---

## 1. 개요 및 목적
실제 운영 환경(t3a.small)에서 트래픽 폭주 상황 발생 시, 시스템이 얼마나 안정적으로 요청을 처리하는지 검증하고 한계 성능을 파악함.

## 2. 테스트 시나리오
- **사용 스크립트:** `k6/prod_loadtest_v2.js`
- **시나리오 흐름:**
    1.  **로그인:** JWT 토큰 발급 (부하 유발: BCrypt 암호 검증)
    2.  **API 호출:** 본인 정보 조회 (`GET /api/members/{id}`)
    3.  **반복:** 위 과정을 1초 간격으로 반복 (Think Time 적용)
- **트래픽 패턴 (Step Load):**
    - `0m ~ 1m`: 0명 → 100명 (Warm-up)
    - `1m ~ 2m`: 100명 → **300명** (Ramp-up)
    - `2m ~ 5m`: **300명 유지** (Peak Load - 3분간 지속)
    - `5m ~ 6m`: 300명 → 0명 (Ramp-down)

## 3. 테스트 결과 비교 (Local vs Production)

| 지표 | **Local (Reference)** | **Production (Target)** |
| :--- | :--- | :--- |
| **서버 환경** | macOS (Apple Silicon M series) | AWS EC2 t3a.small (vCPU 2, 2GB RAM) |
| **최대 동시 접속 (VUs)** | 500명 | **300명** |
| **총 처리 요청 수** | 116,419 reqs | **50,018 reqs** |
| **성공률 (Success Rate)** | 100% | **100%** |
| **평균 응답 속도 (Avg)** | 6.88 ms | **562.93 ms** |
| **95% 응답 속도 (p95)** | 14.81 ms | **1.69 s (1,690 ms)** |
| **최대 지연 시간 (Max)** | 206.01 ms | **6.89 s** |

## 4. 상세 분석

### 4.1. 안정성 (Stability) ✅ **Excellent**
- **100% 성공률:** 300명의 사용자가 동시에 지속적으로 요청을 보내는 상황에서도 단 한 건의 에러(5xx)나 타임아웃이 발생하지 않음.
- **결론:** `t3a.small` 인스턴스임에도 불구하고 Spring Boot 애플리케이션과 MySQL DB가 효율적으로 구성되어 있음.

### 4.2. 성능 한계 (Performance Limit)
- **응답 속도 저하:** VUs가 300명에 도달했을 때, 평균 응답 속도는 약 0.5초로 준수하나, 하위 5%(p95) 사용자는 1.69초의 지연을 경험함.
- **최대 지연:** 일부 요청은 최대 6.89초까지 지연됨. 이는 CPU Credit 고갈 또는 스레드 풀 대기 현상으로 추정됨.
- **해석:** 300명 동시 접속은 처리 가능하나, 쾌적한 사용자 경험(1초 이내 응답)을 보장하는 **적정 동시 접속자 수는 약 150~200명** 수준으로 판단됨.

## 5. 종합 결론 및 제언
1.  **현재 아키텍처 승인:** 예상되는 교회 구성원 규모(수천 명)를 고려할 때, 동시 접속자 300명을 100% 처리해낸 현재 시스템은 충분한 스펙을 갖추고 있음.
2.  **모니터링 강화:** 실제 운영 중 CPU 사용률이 80%를 넘거나 응답 속도가 2초 이상 지속될 경우, **Scale-up (t3a.medium)** 또는 **Scale-out (서버 증설)**을 고려해야 함.
