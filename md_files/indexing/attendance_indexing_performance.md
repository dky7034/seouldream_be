# 출석(Attendance) 도메인 인덱싱 성능 분석 보고서

**작성일:** 2026년 1월 6일  
**관련 도메인:** `Attendance` (출석)  
**테스트 환경:** Local Development Environment

---

## 1. 개요
출석 데이터가 누적됨에 따라 주요 조회 쿼리(`기간별 조회`, `셀별 조회`)의 성능 저하가 우려됨. 이에 따라 복합 인덱스(Composite Index)를 적용하고, 적용 전후의 성능을 비교 측정함.

## 2. 테스트 시나리오 및 데이터
- **데이터 규모:** 약 84,800건 (Attendance 레코드)
- **테스트 쿼리:**
    1.  `findByDateBetween`: 24개월치 데이터 전체 조회
    2.  `findByCell_IdAndDateBetween`: 특정 셀의 24개월치 데이터 조회

## 3. 측정 결과 (Local Environment)

| 테스트 항목 | 대상 레코드 수 | 인덱스 **미적용** (Time) | 인덱스 **적용** (Time) | 변화율 |
| :--- | :--- | :--- | :--- | :--- |
| **findByDateBetween** (24개월) | 84,800건 | **579 ms** | **529 ms** | 약 8.6% 개선 |
| **findByCell_IdAndDateBetween** | 52,106건 | **330 ms** | **342 ms** | 차이 미미 (오차 범위) |

> *참고: 로컬 테스트 환경은 고성능 CPU/Memory를 사용하므로, 8만 건 정도의 데이터는 Full Scan 비용과 Index Scan 비용의 차이가 크지 않거나, 캐싱 등의 영향으로 비슷하게 측정됨.*

---

## 4. 분석 및 의사결정

### 4.1. 로컬 테스트 결과 분석
- **미미한 차이:** 개발 장비의 스펙이 우수하여 모든 데이터를 메모리에 올려 처리할 수 있었기 때문에, 인덱스를 통한 I/O 감소 효과가 극적으로 드러나지 않음.
- **오버헤드:** `findByCell_IdAndDateBetween`의 경우 오히려 미세하게 느려진 것으로 보이나, 이는 네트워크/CPU 스케줄링 등에 의한 오차 범위(Jitter)로 판단됨.

### 4.2. 운영 환경(Production) 고려 사항
실제 서비스가 배포될 **AWS EC2 t3a.small** 환경은 다음과 같은 제약이 있음:
1.  **CPU Credit 제한:** Full Table Scan은 CPU를 많이 소모하므로, 트래픽이 몰릴 경우 CPU Credit 고갈로 서버가 멈출 위험이 있음.
2.  **Memory 제한:** 데이터가 수십만 건으로 늘어날 경우, 메모리 부족으로 디스크 Swap이 발생하면 성능이 급격히 저하됨.

### 5. 결론
**"인덱싱 적용 유지"**

로컬에서의 드라마틱한 속도 향상은 없었으나, 다음 이유로 인덱스를 적용하여 배포함.
1.  **안정성 확보:** 인덱스를 통해 DB가 스캔해야 할 데이터 범위를 좁혀주어(Range Scan), **CPU 부하를 낮춤.**
2.  **확장성(Scalability):** 향후 데이터가 10만, 100만 건으로 증가했을 때, 인덱스 없이는 조회 자체가 불가능해지는 상황(Timeout)을 예방.
3.  **비용 효율:** 저사양 인스턴스(t3a.small)에서도 안정적인 서비스를 제공하기 위한 필수 최적화.
